const bel = require('bel')
const file = require('path').basename(__filename)

module.exports = planPlay

function planPlay (plan = null, protocol) {
    const sender = protocol (get)
    sender({from: 'plan-play', type: 'ready', file, line: 9 })
    const cancelButton = bel`<button class="btn" data-action="cancel" aria-label="Cancel" onclick="${() => handleCancel()}">Cancel</button>`
    const confirmButton = bel`<button class="btn" data-action="confirm" aria-label="Confirm" onclick="${() => handleConfirm()}">Confirm</button>`
    const el = bel`
    <section class="row" data-action="run-plan" aria-label="run plan"> 
        <p>
            Do you determine to be a sponsor for <strong>${plan}</strong>?<br/>
            This action will be continuous paying via your schedule.
        </p>
        <div class="actions" role="action">
            ${cancelButton}${confirmButton}
        </div>
    </section>`

    return el

    function handleCancel () {
        sender({from: 'run-plan', type: 'ready'})
    }

    function handleConfirm () {
        console.log('confirm');
    }

    function get (msg) {
        console.log( msg );
    }
}